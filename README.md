vagrant-OpenMRS
===============
This should set you up with a machine sufficient for OpenMRS core or module development.  Let me know if anything is missing or incorrect (or better yet - send me a pull request!)

The following will be installed and setup for you:

- Ubuntu 12.04 LTS (32 bit) (user/pass: vagrant/vagrant)    NOTE: this is a headless VM (i.e. no GUI).  Write all of your code on your host machine and compile it on the VM.
- OpenJDK 6
- Tomcat 6
- MySQL 5.5 (root password: OpenMRS)
- git
- vim
- OpenMRS 1.9.2 war file (deployed to /var/lib/tomcat/webapps)


Installation & setup instructions
=================================
0. Ensure your laptop is plugged in and connected to the Internet  :)
1. install VirtualBox: https://www.virtualbox.org/wiki/Downloads
2. install Vagrant: http://downloads.vagrantup.com/tags/v1.0.6
3. clone this repository: https://github.com/crolfe/vagrant-OpenMRS
4. from the command line, change to the vagrant-OpenMRS directory
5. type ```vagrant up```
6. allow time (+/- 20 minutes)for the base image and packages to download and install.  It may look like it has hung or stopped working at times, but that's just part of the process - be patient!    
7. You will see errors on the last step for now, but that's OK.  I plan on fixing this though!  http://i.imgur.com/xwsi5Vk.png
8. Connect to the box:
    - Linux or OS X type this to connect to the box: ```vagrant ssh```
    - Windows, you will need an ssh client like Putty: http://www.putty.org/
    - Additional info available here: http://docs-v1.vagrantup.com/v1/docs/getting-started/ssh.html
9. edit your .bashrc file and add the following to the end of the file:

        export MAVEN_OPTS="-Xms512m -Xmx1024m -XX:PermSize=256m -XX:MaxPermSize=512m -XX:NewSize=128m"
        export JAVA_HOME="/usr/"
        export PATH=$PATH:$HOME/bin:$JAVA_HOME/bin

10. reload the .bashrc with this command: ```source ~/.bashrc```
11. test the variables have been set: ```echo $JAVA_HOME``` you should see this: ```/usr/```
12. restart the avahi-daemon service: ```sudo service avahi-daemon restart```
13. Within a web browser on your host machine, go to this URL to install OpenMRS core: http://openmrs-dev.local:8080/openmrs
14. Follow the prompts and give this for the MySQL password: OpenMRS
15. Make note of the default admin credentials for this site: admin/Admin123
16. Heading back to your VM...there is a folder shared at ```/vagrant``` that points to the "vagrant-OpenMRS" folder on your host machine.  Create a folder called "code" in /vagrant to hold the cpm and/or core source:  mkdir code
13. change to the new directory and you should now be at ```/vagrant/code```
14. setup git (using your name and email, of course!):

        git config --global user.name "John Doe"
        git config --global user.email johndoe@example.com

15. clone the cpm code: ```git clone https://github.com/johnsyweb/openmrs-cpm.git```
16. Change to openmrs-cpm
17. Compile the cpm module: ```./go package```
18. Once complete, install the module:
      - login to http://openmrs-dev.local:8080/openmrs
      - click the "Administration" link
      - click "manage modules" link
      - click "Add or Upgrade modules" button
      - click "choose file" button"
      - open the ```/vagrant-OpenMRS/code/openmrs-cpm/omod/*.omod``` file generated by the compile
      - click upload and you're done!
