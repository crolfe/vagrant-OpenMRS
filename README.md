vagrant-OpenMRS
===============
This should set you up with a machine sufficient for OpenMRS core or module development.  Let me know if anything is missing or incorrect (or better yet - send me a pull request!)

The following will be installed and setup for you:

- Ubuntu 12.04 LTS (32 bit) (user/pass: vagrant/vagrant)    NOTE: this is a headless VM (i.e. no GUI).  Write all of your code on your host machine and compile it on the VM.
- OpenJDK 6
- Tomcat 6
- MySQL 5.5 (root password: OpenMRS)
- git
- vim
- OpenMRS 1.9.2 war file (deployed to /var/lib/tomcat/webapps)


Installation & setup instructions
=================================
1. Ensure your laptop is plugged in and connected to the Internet  :)
2. Install VirtualBox: https://www.virtualbox.org/wiki/Downloads
3. Install Vagrant: http://downloads.vagrantup.com/tags/v1.0.6
4. Clone this repository: https://github.com/crolfe/vagrant-OpenMRS
5. From the command line, change to the ```vagrant-OpenMRS``` directory
6. Type ```vagrant up```
7. Allow time (+/- 20 minutes) for the base image and packages to download and install.  It may look like it has hung or stopped working at times, but that's just part of the process - be patient!    
8. You will see errors on the last step for now, but that's OK. I plan on fixing this though! http://i.imgur.com/xwsi5Vk.png
9. Connect to the box:
    - Linux or OS X type this to connect to the box: ```vagrant ssh```
    - Windows, you will need an ssh client like Putty: http://www.putty.org/
    - Additional info available here: http://docs-v1.vagrantup.com/v1/docs/getting-started/ssh.html
10. Restart the avahi-daemon service: ```sudo service avahi-daemon restart```
11. Within a web browser on your host machine, go to this URL to install OpenMRS core: http://openmrs-dev.local:8080/openmrs
12. Follow the prompts and give this for the MySQL password: OpenMRS
13. Make note of the default admin credentials for this site: admin/Admin123
14. Heading back to your VM, there's a folder shared at ```/vagrant``` that points to the "vagrant-OpenMRS" folder on your host machine.  Create a folder called "code" in /vagrant to hold the cpm and/or core source:  ```mkdir code```
15. Change to the new directory and you should now be at ```/vagrant/code```
16. Setup git (using your name and email, of course!):

        git config --global user.name "John Doe"
        git config --global user.email johndoe@example.com

17. Clone the cpm code: ```git clone https://github.com/OpenMRS-Australia/openmrs-cpm.git```
18. Change to openmrs-cpm
19. Compile the cpm module: ```./go build```
20. Once complete, install the module:
      - Login to http://openmrs-dev.local:8080/openmrs
      - Click the "Administration" link
      - Click "manage modules" link
      - Click "Add or Upgrade modules" button
      - Click "choose file" button"
      - Open the ```/vagrant-OpenMRS/code/openmrs-cpm/build/libs/*.omod``` file generated by the compile
      - Click upload and you're done!
